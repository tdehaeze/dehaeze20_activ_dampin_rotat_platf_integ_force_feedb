#+TITLE: Active Damping of Rotating Positioning Platforms
:DRAWER:
#+LATEX_CLASS: ISMA_USD2020
#+OPTIONS: toc:nil
#+STARTUP: overview

#+DATE:
#+AUTHOR:

#+LATEX_HEADER_EXTRA: \author[1,3] {T. Dehaeze}
#+LATEX_HEADER_EXTRA: \author[1,2] {C. Collette}

#+LATEX_HEADER_EXTRA: \affil[1] {Precision Mechatronics Laboratory\NewLineAffil University of Liege, Belgium \NewAffil}
#+LATEX_HEADER_EXTRA: \affil[2] {BEAMS Department\NewLineAffil Free University of Brussels, Belgium \NewAffil}
#+LATEX_HEADER_EXTRA: \affil[3] {European Synchrotron Radiation Facility \NewLineAffil Grenoble, France e-mail: \textbf{thomas.dehaeze@esrf.fr}}

#+LATEX_HEADER_EXTRA: \bibliographystyle{IEEEtran}

#+LATEX_HEADER: \usepackage{amsmath,amssymb,amsfonts, cases}
#+LATEX_HEADER: \usepackage{algorithmic, graphicx, textcomp}
#+LATEX_HEADER: \usepackage{xcolor, import, hyperref}
#+LATEX_HEADER: \usepackage[USenglish]{babel}

#+LATEX_HEADER: \setcounter{footnote}{1}
#+LATEX_HEADER: \input{config.tex}
:END:

* LaTeX Config                                                     :noexport:
#+begin_src latex :tangle config.tex

#+end_src

* Build                                                            :noexport:
#+NAME: startblock
#+BEGIN_SRC emacs-lisp :results none
  (add-to-list 'org-latex-classes
               '("ISMA_USD2020"
                 "\\documentclass{ISMA_USD2020}"
                 ("\\section{%s}" . "\\section*{%s}")
                 ("\\subsection{%s}" . "\\subsection*{%s}")
                 ("\\subsubsection{%s}" . "\\subsubsection*{%s}")
                 ("\\paragraph{%s}" . "\\paragraph*{%s}")
                 ("\\subparagraph{%s}" . "\\subparagraph*{%s}"))
               )
#+END_SRC

* Abstract                                                           :ignore:
#+BEGIN_EXPORT latex
\abstract{
    Abstract text to be done
}
#+END_EXPORT

* Introduction
<<sec:introduction>>
*** Establish the importance of the research topic                 :ignore:
# Active Damping + Rotating Systems

*** Applications of active damping                                  :ignore:
# Link to previous paper / tomography

cite:dehaeze18_sampl_stabil_for_tomog_exper

*** Current active damping techniques                               :ignore:
# IFF, DVF

*** Describe a gap in the research                                 :ignore:
# No literature on rotating systems => gyroscopic effects

*** Describe the paper itself / the problem which is addressed     :ignore:

*** Introduce Each part of the paper                               :ignore:

* System Under Study
** Rotating Positioning Platform
# Simplest system where gyroscopic forces can be studied
Consider the rotating X-Y stage of Figure [[fig:rotating_xy_platform]].

# Present the system, parameters, assumptions

# Small displacements

# Constant rotating speed

# Explain the frames (inertial frame x,y, rotating frame u,v)

- $k$: Actuator's Stiffness [N/m]
- $m$: Payload's mass [kg]
- $\Omega = \dot{\theta}$: rotation speed [rad/s]
- $F_u$, $F_v$
- $d_u$, $d_v$

#+name: fig:rotating_xy_platform
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/rotating_xy_platform.pdf]]


#+name: fig:cedrat_xy25xs
#+caption: Figure caption
#+attr_latex: :width 0.5\linewidth
[[file:figs/cedrat_xy25xs.jpg]]

** Equation of Motion
The system has two degrees of freedom and is thus fully described by the generalized coordinates $u$ and $v$.

Let's express the kinetic energy $T$ and the potential energy $V$ of the mass $m$ (neglecting the rotational energy):

Dissipation function $R$
Kinetic energy $T$
Potential energy $V$
#+name: eq:energy_inertial_frame
\begin{subequations}
  \begin{align}
    T & = \frac{1}{2} m \left( \left( \dot{u} - \Omega v \right)^2 + \left( \dot{v} + \Omega u \right)^2 \right) \\
    R & = \frac{1}{2} c \left( \dot{u}^2 + \dot{v}^2 \right) \\
    V & = \frac{1}{2} k \left( u^2 + v^2 \right)
  \end{align}
\end{subequations}

The Lagrangian is the kinetic energy minus the potential energy:
#+name: eq:lagrangian_inertial_frame
\begin{equation}
L = T - V
\end{equation}

From the Lagrange's equations of the second kind eqref:eq:lagrange_second_kind, the equation of motion eqref:eq:eom_mixed is obtained ($q_1 = u$, $q_2 = v$).
\begin{equation}
  \frac{d}{dt} \left( \frac{\partial L}{\partial \dot{q}_i} \right) + \frac{\partial D}{\partial \dot{q}_i} - \frac{\partial L}{\partial q_i} = Q_i
\end{equation}

\begin{equation}
  \frac{d}{dt} \left( \frac{\partial T}{\partial \dot{q}_i} \right) - \frac{\partial T}{\partial q_i} + \frac{\partial R}{\partial \dot{q}_i} - \frac{\partial V}{\partial q_i} = Q_i
\end{equation}

with $Q_i$ is the generalized force associated with the generalized variable $q_i$ ($F_u$ and $F_v$).

\begin{subequations}
  \begin{align}
    m \ddot{u} + c \dot{u} + ( k - m \Omega ) u &= F_u + 2 m \Omega \dot{v} \\
    m \ddot{v} + c \dot{v} + ( k \underbrace{-\,m \Omega}_{\text{Centrif.}} ) v &= F_v \underbrace{-\,2 m \Omega \dot{u}}_{\text{Coriolis}}
  \end{align}
\end{subequations}

# Explain Gyroscopic effects




# Laplace Domain

\begin{subequations}
  \begin{align}
    u &= \frac{ms^2 + cs + k - m \Omega^2}{\left( m s^2 + cs + k - m \Omega^2 \right)^2 + \left( 2 m \Omega s \right)^2} F_u +  \frac{2 m \Omega s}{\left( m s^2 + cs + k - m \Omega^2 \right)^2 + \left( 2 m \Omega s \right)^2} F_v \\
    v &= \frac{-2 m \Omega s}{\left( m s^2 + cs + k - m \Omega^2 \right)^2 + \left( 2 m \Omega s \right)^2} F_u +  \frac{ms^2 + cs + k - m \Omega^2}{\left( m s^2 + cs + k - m \Omega^2 \right)^2 + \left( 2 m \Omega s \right)^2} F_v
  \end{align}
\end{subequations}

# Change of variables
\begin{equation}
\begin{bmatrix} d_u \\ d_v \end{bmatrix} =
\bm{G}_d
\begin{bmatrix} F_u \\ F_v \end{bmatrix}
\end{equation}
Where $\bm{G}_d$ is a $2 \times 2$ transfer function matrix.

\begin{equation}
\bm{G}_d = \frac{1}{k} \frac{1}{G_{dp}}
\begin{bmatrix}
   G_{dz} & G_{dc} \\
  -G_{dc} & G_{dz}
\end{bmatrix}
\end{equation}
With:
\begin{subequations}
  \begin{align}
    G_{dp} &= \left( \frac{s^2}{{\omega_0}^2} + 2 \xi \frac{s}{\omega_0} + 1 - \frac{{\Omega}^2}{{\omega_0}^2} \right)^2 + \left( 2 \frac{\Omega}{\omega_0} \frac{s}{\omega_0} \right)^2 \\
    G_{dz} &= \frac{s^2}{{\omega_0}^2} + 2 \xi \frac{s}{\omega_0} + 1 - \frac{{\Omega}^2}{{\omega_0}^2} \\
    G_{dc} &= 2 \frac{\Omega}{\omega_0} \frac{s}{\omega_0}
  \end{align}
\end{subequations}



- $\omega_0 = \sqrt{\frac{k}{m}}$: Natural frequency of the mass-spring system in $\si{\radian/\s}$
- $\xi$ damping ratio



#+name: eq:lagrange_second_kind
\begin{equation}
  \frac{d}{dt} \left( \frac{\partial L}{\partial \dot{q}_j} \right) = \frac{\partial L}{\partial q_j}
\end{equation}

#+name: eq:eom_mixed
\begin{subequations}
  \begin{align}
    m\ddot{x} + kx = F_u \cos{\theta} - F_v \sin{\theta}\\
    m\ddot{y} + ky = F_u \sin{\theta} + F_v \cos{\theta}
  \end{align}
\end{subequations}

Performing the change coordinates from $(x, y)$ to $(d_x, d_y, \theta)$:
\begin{subequations}
  \begin{align}
    x & = d_u \cos{\theta} - d_v \sin{\theta}\\
    y & = d_u \sin{\theta} + d_v \cos{\theta}
  \end{align}
\end{subequations}

Gives
#+name: eq:oem_coupled
\begin{subequations}
  \begin{align}
    m \ddot{d_u} + (k - m\dot{\theta}^2) d_u &= F_u + 2 m\dot{d_v}\dot{\theta} + m d_v\ddot{\theta} \label{eq:du_coupled} \\
    m \ddot{d_v} + (k \underbrace{-\ m\dot{\theta}^2}_{\text{Centrif.}}) d_v &= F_v \underbrace{-\ 2 m\dot{d_u}\dot{\theta}}_{\text{Coriolis}} \underbrace{-\ m d_u\ddot{\theta}}_{\text{Euler}} \label{eq:dv_coupled}
  \end{align}
\end{subequations}

We obtain two differential equations that are coupled through:
- *Euler forces*: $m d_v \ddot{\theta}$
- *Coriolis forces*: $2 m \dot{d_v} \dot{\theta}$

Without the coupling terms, each equation is the equation of a one degree of freedom mass-spring system with mass $m$ and stiffness $k- m\dot{\theta}^2$.
Thus, the term $- m\dot{\theta}^2$ acts like a negative stiffness (due to *centrifugal forces*).

** Constant Rotating Speed
To simplify, let's consider a constant rotating speed $\dot{\theta} = \Omega$ and thus $\ddot{\theta} = 0$.

#+NAME: eq:coupledplant
\begin{equation}
\begin{bmatrix} d_u \\ d_v \end{bmatrix} =
\frac{1}{(m s^2 + (k - m{\omega_0}^2))^2 + (2 m {\omega_0} s)^2}
\begin{bmatrix}
  ms^2 + (k-m{\omega_0}^2) & 2 m \omega_0 s \\
  -2 m \omega_0 s          & ms^2 + (k-m{\omega_0}^2) \\
\end{bmatrix}
\begin{bmatrix} F_u \\ F_v \end{bmatrix}
\end{equation}

# Explain each term

#+NAME: eq:coupled_plant
\begin{equation}
\begin{bmatrix} d_u \\ d_v \end{bmatrix} =
\frac{\frac{1}{k}}{\left( \frac{s^2}{{\omega_0}^2} + (1 - \frac{{\Omega}^2}{{\omega_0}^2}) \right)^2 + \left( 2 \frac{{\Omega} s}{{\omega_0}^2} \right)^2}
\begin{bmatrix}
  \frac{s^2}{{\omega_0}^2} + 1 - \frac{{\Omega}^2}{{\omega_0}^2} & 2 \frac{\Omega s}{{\omega_0}^2} \\
  -2 \frac{\Omega s}{{\omega_0}^2}          & \frac{s^2}{{\omega_0}^2} + 1 - \frac{{\Omega}^2}{{\omega_0}^2} \\
\end{bmatrix}
\begin{bmatrix} F_u \\ F_v \end{bmatrix}
\end{equation}

When the rotation speed is null, the coupling terms are equal to zero and the diagonal terms corresponds to one degree of freedom mass spring system.
#+NAME: eq:coupled_plant_no_rot
\begin{equation}
\begin{bmatrix} d_u \\ d_v \end{bmatrix} =
\frac{\frac{1}{k}}{\frac{s^2}{{\omega_0}^2} + 1}
\begin{bmatrix}
  1 & 0 \\
  0 & 1
\end{bmatrix}
\begin{bmatrix} F_u \\ F_v \end{bmatrix}
\end{equation}

# Campbell Diagram

When the rotation speed in not null, the resonance frequency is duplicated into two pairs of complex conjugate poles.
As the rotation speed increases, one of the two resonant frequency goes to lower frequencies as the other one goes to higher frequencies (Figure [[fig:campbell_diagram]]).

#+name: fig:campbell_diagram
#+caption: Campbell Diagram
#+attr_latex: :scale 1
[[file:figs/campbell_diagram.pdf]]

# Bode Plots for different ratio wr/w0

The magnitude of the coupling terms are increasing with the rotation speed.

#+name: fig:plant_compare_rotating_speed
#+caption: Caption
#+attr_latex: :scale 1
[[file:figs/plant_compare_rotating_speed.pdf]]

* Integral Force Feedback
** Control Schematic

** Equations

** Plant Dynamics

#+name: fig:root_locus_pure_iff
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_pure_iff.pdf]]

** Physical Interpretation

* Integral Force Feedback with Low Pass Filters

#+name: fig:loop_gain_modified_iff
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/loop_gain_modified_iff.pdf]]

#+name: fig:root_locus_modified_iff
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_modified_iff_bis.pdf]]

#+name: fig:root_locus_wi_modified_iff
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_wi_modified_iff.pdf]]

* Integral Force Feedback with Parallel Springs

#+name: fig:rotating_xy_platform_springs
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/rotating_xy_platform_springs.pdf]]

#+name: fig:plant_iff_kp
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/plant_iff_kp.pdf]]

#+name: fig:root_locus_iff_kps
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_iff_kps.pdf]]

#+name: fig:root_locus_iff_kp_bis
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_iff_kp_bis.pdf]]

#+name: fig:root_locus_opt_gain_iff_kp
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_opt_gain_iff_kp.pdf]]

#+name: fig:plant_iff_compare_rotating_speed
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/plant_iff_compare_rotating_speed.pdf]]

* Direct Velocity Feedback

#+name: fig:root_locus_dvf
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/root_locus_dvf.pdf]]

* Comparison of the Proposed Active Damping Techniques

#+name: fig:comp_root_locus
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/comp_root_locus.pdf]]

#+name: fig:comp_compliance
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/comp_compliance.pdf]]

#+name: fig:comp_transmissibility
#+caption: Figure caption
#+attr_latex: :scale 1
[[file:figs/comp_transmissibility.pdf]]

* Conclusion
<<sec:conclusion>>


* Acknowledgment
:PROPERTIES:
:UNNUMBERED: t
:END:

* Bibliography                                                       :ignore:
\bibliography{ref.bib}
